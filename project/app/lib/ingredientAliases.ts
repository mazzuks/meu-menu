/**
 * Sistema de aliases para ingredientes
 * Mapeia ingredientes principais para seus sinônimos/variações
 */

export const ingredientAliases = {
  // === Bloco 1 — Grãos e Cereais ===
  "arroz branco": ["arroz", "arroz cozido", "arroz quente"],
  "arroz arbório": ["arroz arboreo"],
  "arroz basmati": [],
  "arroz bomba": [],
  "arroz carnaroli": [],
  "arroz glutinoso": ["arroz doce", "arroz pegajoso"],
  "arroz jasmine": ["arroz jasmim"],
  "arroz selvagem": ["wild rice"],
  "arroz sushi": ["arroz japonês", "arroz para sushi"],
  "arroz torrado moído": ["arroz torrado moido"],

  "farinha de arroz": ["farinha arroz"],
  "farinha de milho": ["farinha milho", "fubá"],
  "farinha de trigo": ["farinha trigo", "farinha comum"],
  "farinha 00": ["farinha italiana", "farinha tipo 00"],
  "farinha integral": ["farinha de trigo integral"],
  "farinha de rosca": ["farinha rosca", "panko"],

  "milho": ["espigas milho", "chalas milho", "chalas de milho", "pipoca", "milho verde"],
  "macarrão de arroz": ["macarrão arroz", "rice noodles"],
  "macarrão de trigo": ["macarrão trigo", "pasta"],
  "macarrão de trigo sarraceno": ["soba", "buckwheat noodles"],
  "macarrão egg noodles": ["egg noodles"],
  "macarrão ramen": ["ramen noodles"],
  "macarrão udon": ["udon noodles"],
  "macarrão somyeon": ["somyeon"],
  "macarrão vermicelli": ["vermicelli"],

  "aveia": ["aveia em flocos", "oats"],
  "quinoa": ["quinua"],
  "cevada": ["malte cevada", "malte de cevada"],
  "centeio": ["rye"],
  "cuscuz": ["cuscuz marroquino", "couscous"],
  "bulgur": ["trigo bulgur", "bulgur fino"],
  "polenta": ["fubá grosso"],
  "semolina": ["sêmola", "farinha de sêmola"],
  "tapioca": ["goma de tapioca", "fécula de mandioca"],
  "polvilho": ["polvilho doce", "polvilho azedo"],

  // Massas específicas
  "massa de pizza": ["massa pizza", "disco de pizza"],
  "massa de lasanha": ["massa lasanha", "folhas de lasanha"],
  "massa folhada": ["massa folhada pronta"],
  "massa filo": ["massa phyllo", "filo pastry"],
  "massa wonton": ["wonton wrappers"],

  // Pães e bases
  "pão francês": ["pão de sal", "pãozinho"],
  "pão de forma": ["pão forma", "pão de sanduíche"],
  "pão integral": ["pão de forma integral"],
  "pão pita": ["pita bread"],
  "tortillas de milho": ["tortillas milho", "tortilla"],
  "tortillas de trigo": ["tortillas trigo", "flour tortillas"],
  "naan": ["pão naan", "naan bread"],
  "chapati": ["roti"],

  // Cereais matinais
  "granola": ["granola caseira"],
  "muesli": [],
  "cornflakes": ["flocos de milho"],

  // Grãos especiais
  "amaranto": [],
  "chia": ["semente de chia"],
  "linhaça": ["semente de linhaça"],
  "gergelim": ["semente de gergelim", "tahine"],
  "girassol": ["semente de girassol"],

// === Bloco Único de Ingredientes — Parte 1 ===
"abacate": ["abacate maduro"],
"abacaxi": [],
"abalones": [],
"abobrinha": [],
"abobrinhas": [],
"abóbora": [],
"achiote": [],
"acém": ["acém bovino"],
"aipo": [],
"ají amarillo": ["ají molido"],
"alcaparras": [],
"alecrim": ["alecrim fresco"],
"alface": [],
"algas wakame": [],
"alho": ["alho em pó", "alho negro"],
"amendoim": ["amendoim moído", "amendoim torrado"],
"amido": ["amido batata doce"],
"anis": [],
"anko": [],
"aonori": [],
"aperol": [],
"atum sashimi": [],
"awamori": [],
"azeite": ["azeite de oliva", "azeite extra virgem"],
"azeitona": ["azeitona verde"],
"azeitonas": ["azeitonas kalamata", "azeitonas verdes"],
"açafrão": [],
"açúcar": [
  "açúcar cristal",
  "açúcar de confeiteiro",
  "açúcar de palma",
  "açúcar escuro",
  "açúcar mascavo",
  "açúcar palma",
  "açúcar para caramelo",
  "açúcar para polvilhar"
],
"açúcar branco": ["açúcar refinado", "açucar refinado", "açúcar cristal fino"],
"açúcar mascavo": ["açucar mascavo", "açúcar marrom"],
"bacon": [],
"bacalhau": [],
"bagas": [],
"banana": [],
"batata": ["batata doce", "batata inglesa", "batata cozida", "batata média cozida"],
"batata frita": [],
"batata palha": [],
"berinjela": [],
"beterraba": [],
"brócolis": ["brócolis ninja"],
"camarão": ["camarão seco", "camarão fresco"],
"camarões": [],
"camomila": [],
"canela": ["canela em pó", "canela em rama"],
"carne moída": ["carne bovina moída", "carne moida"],
"carne seca": [],
"carneiro": [],
"cebola": ["cebola branca", "cebola média", "cebola pequena"],
"cebola roxa": [],
"cebolinha": ["cebolinha verde", "cebolinha fresca"],
"cenoura": [],
"champignon": [],
"cheddar": [],
"chimichurri": [],
"chouriço": [],
"coentro": ["coentro fresco", "sementes de coentro"],
"cogumelo": ["cogumelos", "cogumelo paris", "cogumelo shiitake", "cogumelo shimeji"],
"couve": ["couve manteiga"],
"couve-flor": [],
"creme de leite": ["nata", "creme leite fresco"],
"crème fraîche": [],
"croutons": [],
"curry": [],
"ervas finas": [],
"ervilha": ["ervilhas frescas", "ervilhas congeladas"],
"espinafre": [],
"estragão": [],
"fava": [],
"feijão": ["feijão preto", "feijão carioca", "feijão branco", "feijão manteiga"],
"figo": [],
"file de frango": ["peito de frango"],
"file mignon": ["filé mignon"],
"frango": ["frango inteiro", "peito de frango", "sobrecoxa de frango", "coxa de frango"],
"gengibre": ["gengibre fresco", "gengibre em pó"],
"goiaba": [],
"hortelã": ["hortelã fresca"],
"jiló": [],
"kiwi": [],
"lagosta": [],
"lambic": [],
"lambic framboesa": [],
"lata de tomate": ["molho de tomate", "tomate pelado"],
"lavanda": [],
"lentilha": ["lentilhas"],
"levedura": [],
"limão": ["limão siciliano", "limão taiti"],
"linguiça": ["linguiça calabresa", "linguiça toscana"],
"louro": ["folha de louro"],
"maçã": ["maçã verde", "maçã fuji", "maçã gala"],
"maionese": [],
"manjericão": ["manjericão fresco", "manjericão seco"],
"maracujá": [],
"marisco": [],
"margarina": ["margarina vegetal"],
"manteiga": ["manteiga com sal", "manteiga sem sal"],
"lata de milho": []

// === Bloco Único de Ingredientes — Parte 2 ===
"manjerona": [],
"mel": ["melado"],
"melancia": [],
"melão": [],
"menta": [],
"mexilhão": [],
"molho inglês": [],
"molho shoyu": ["shoyu", "molho de soja"],
"mostarda": ["mostarda dijon", "mostarda amarela"],
"nabo": [],
"noz-moscada": [],
"nozes": ["noz pecã", "pecã", "nozes pecã"],
"ovo": ["ovo caipira", "ovo de galinha", "ovo para recheio"],
"ovo cozido": [],
"ovo mexido": [],
"páprica": ["páprica doce", "páprica picante"],
"palmito": [],
"pão": ["pão francês", "pão integral", "pão de forma"],
"pão sírio": ["pão pita"],
"pasta de amendoim": [],
"pasta de gergelim": ["tahine", "tahini"],
"peixe": ["peixe branco", "peixe grelhado", "peixe assado"],
"pepino": ["pepino japonês"],
"pera": [],
"peru": ["peito de peru", "peru assado"],
"picles": [],
"pimenta": ["pimenta preta", "pimenta-do-reino", "pimenta calabresa"],
"pimentão": ["pimentão vermelho", "pimentão amarelo", "pimentão verde"],
"pinoli": [],
"pistache": [],
"presunto": ["presunto cru", "presunto cozido", "presunto parma"],
"queijo": [
  "queijo parmesão",
  "queijo mussarela",
  "queijo gorgonzola",
  "queijo minas",
  "queijo prato",
  "queijo brie",
  "queijo cheddar"
],
"quiabo": [],
"rabanete": [],
"ragu": [],
"rapadura": [],
"repolho": ["repolho roxo", "repolho branco"],
"ricota": [],
"rúcula": [],
"sálvia": [],
"sal refinado": ["sal de cozinha", "sal comum"],
"sal grosso": ["sal churrasco", "sal parrilla"],
"salada": [],
"salsão": [],
"salsinha": ["salsa", "salsa fresca"],
"sardinha": [],
"saquê": ["sakê"],
"saquê mirin": ["mirin"],
"serrano": ["presunto serrano"],
"siri": [],
"soja": [],
"sopa miso": ["missoshiru"],
"suco de laranja": [],
"suco de limão": [],
"sushi": [],
"tamarindo": [],
"tangerina": [],
"tomate": ["tomates", "tomate italiano", "tomate cereja", "tomate grape"],
"tomilho": ["tomilho fresco", "tomilho seco"],
"torresmo": [],
"uva": ["uvas verdes", "uvas roxas"],
"uva passa": ["passas", "uvas passas"],
"vinagre": ["vinagre de vinho", "vinagre branco", "vinagre de maçã"],
"vinho branco": [],
"vinho tinto": [],
"vodka": [],
"wasabi": [],
"whisky": [],
"yakisoba": [],
"yogurte": ["iogurte", "iogurte natural", "iogurte grego", "iogurte integral"],
"zimbro": []
};

/**
 * Busca o ingrediente principal baseado no nome fornecido
 * @param ingredientName Nome do ingrediente a ser buscado
 * @returns Nome do ingrediente principal ou o nome original se não encontrado
 */
export function findMainIngredient(ingredientName: string): string {
  const normalizedInput = ingredientName.toLowerCase().trim();
  
  // Busca direta pelo nome principal
  if (ingredientAliases[normalizedInput]) {
    return normalizedInput;
  }
  
  // Busca nos aliases
  for (const [mainIngredient, aliases] of Object.entries(ingredientAliases)) {
    if (aliases.some(alias => alias.toLowerCase() === normalizedInput)) {
      return mainIngredient;
    }
  }
  
  // Se não encontrou, retorna o nome original
  return ingredientName;
}

/**
 * Obtém todos os aliases de um ingrediente
 * @param mainIngredient Nome do ingrediente principal
 * @returns Array com todos os aliases ou array vazio
 */
export function getIngredientAliases(mainIngredient: string): string[] {
  const normalized = mainIngredient.toLowerCase().trim();
  return ingredientAliases[normalized] || [];
}

/**
 * Verifica se dois ingredientes são equivalentes
 * @param ingredient1 Primeiro ingrediente
 * @param ingredient2 Segundo ingrediente
 * @returns true se são equivalentes, false caso contrário
 */
export function areIngredientsEquivalent(ingredient1: string, ingredient2: string): boolean {
  const main1 = findMainIngredient(ingredient1);
  const main2 = findMainIngredient(ingredient2);
  return main1.toLowerCase() === main2.toLowerCase();
}

/**
 * Normaliza nome de ingrediente para busca
 * @param ingredientName Nome do ingrediente
 * @returns Nome normalizado
 */
export function normalizeIngredientForSearch(ingredientName: string): string {
  return findMainIngredient(ingredientName)
    .toLowerCase()
    .normalize('NFD')
    .replace(/[\u0300-\u036f]/g, '') // Remove acentos
    .replace(/\d+/g, '') // Remove números
    .replace(/(kg|g|ml|l|un|unidade|unidades|dente|dentes|colher|colheres|xícara|xícaras|maço|maços|fatia|fatias|folha|folhas|cm|litro|litros)/gi, '') // Remove unidades
    .replace(/\s+/g, ' ')
    .trim();
}